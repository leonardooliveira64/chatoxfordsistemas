FAZER BACKUP E RESTAURAÇÃO DO BANCO DE DADOS.

VERIFICAR O BANCO
sudo -u postgres psql

ACESSAR A PASTA ONDE VAI FICAR O BACKUP
cd /home/deploy/bkp

COMANDO PARA GERAR O BACKUP
sudo -u postgres pg_dump nomedobancodedados > banco.bkp

CANCELAR OS PROCESSOS ABERTOS QUE ESTÃO USANDO O BANCO DE DADOS
SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE -- don't kill my own connection!  
pid <> pg_backend_pid() -- don't kill the connections to other databases AND datname = 'BANCODEDADOS';
 SELECT *, pg_terminate_backend(pid)
FROM pg_stat_activity 
WHERE pid <> pg_backend_pid()
AND datname = 'BANCODEDADOS';
 
APAGAR O BANCO DE DADOS
 drop database BANCODEDADOS;
 OU
 DROP DATABASE BANCODEDADOS WITH (FORCE);
 
RESTAURAR O BANCO DE DADOS COM O COMANDO QUE FOI SALVO ANTERIORMENTE
sudo -u postgres psql BANCODEDADOS < /home/deploy/bkp/bkpbanco.bkp



PM2
PARA VERIFICAR LOG
ACESSE: cd /home/deploy/APLICACAO/backend

COMANDOS PM2: 
PM2 LOG
PM2 LIST
PM2 RESTART 'NUMERO DA INSTANCIA'
PM2 STOP
PM2 START


REINICIAR SERVER
SUDO SHUTDOWN -R
------------------
FIX LIB WHATSAPP
localize o caminho: /node_modules/whatsapp-web.js/src/Client.js

substituir:
const INTRO_IMG_SELECTOR = '[data-testid="intro-md-beta-logo-dark"], [data-testid="intro-md-beta-logo-light"], [data-asset-intro-image-light="true"], [data-asset-intro-image-dark="true"]';

por:
const INTRO_IMG_SELECTOR = "[data-icon='chat']";

-----------------------

ALTERAR PORTAS FRONTEND/BACKEND SEM PRECISAR REINSTALAR
Alterando no backend .env, e no /etc/nginx a entrada do domínio. Em seguida reiniciar no pm2 e realizar nova certificação de domínio,
altera apenas no sites-avaliable e roda o processo nginx. O sistema vai jogar no sites-enabled automaticamente 